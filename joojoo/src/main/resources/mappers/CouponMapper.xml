<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="joojoo.mapper.CouponMapper">
  	<resultMap type="Coupon" id="CouponMap">
		<id column="couponCode" jdbcType="VARCHAR" property="couponCode" />
		<id column="ownerId" jdbcType="VARCHAR" property="ownerId" />
		<id column="userId" jdbcType="VARCHAR" property="userId" />
		<id column="commentCode" jdbcType="INTEGER" property="commentCode" />
		<id column="couponStatus" jdbcType="VARCHAR" property="couponStatus" />
		
		<result column="couponCode" jdbcType="VARCHAR" property="couponCode" />
		<result column="ownerId" jdbcType="VARCHAR" property="ownerId" />
		<result column="userId" jdbcType="VARCHAR" property="userId" />
		<result column="commentCode" jdbcType="INTEGER" property="commentCode" />
		<result column="couponStatus" jdbcType="VARCHAR" property="couponStatus" />
	</resultMap>  
	
 	<insert id="insertCoupon" parameterType="Coupon">
		insert into Coupon 
		values(#{couponCode},#{ownerId},#{userId},#{commentCode}, #{couponStatus})	
	</insert> 
 
 	<update id="updateCoupon" parameterType="All">
		UPDATE Coupon SET
		owner_id = #{ownerId},
		user_id = #{userId},
		comment_code = #{commentCode},
		coupon_status = #{couponStatus}
		WHERE coupon_code = #{couponCode}
	</update>
 	
	<delete id="deleteCoupon" parameterType="String">
		DELETE FROM Coupon
		WHERE coupon_code = #{couponCode}
	</delete>
	
	<select id= "getCouponByUserId" parameterType="String"
						resultType="All">
		select * 
		from Coupon 
		where user_id=#{userId}					
	</select>
	
	<select id= "getCouponByOwnerId" parameterType="String"
						resultType="All">
		select * 
		from coupon 
		where owner_id=#{ownerId}					
	</select>
	
	<select id= "getCouponsByCommentCode" parameterType="INTEGER"
						resultType="All">
		select * 
		from coupon 
		where comment_code=#{commentCode}					
	</select>
	
	<select id= "getCouponByStatus" parameterType="INTEGER"
						resultType="All">
		select * 
		from coupon 
		where coupon_status=#{couponStatus}					
	</select>
	
	<select id= "getCouponsByCouponCode" parameterType="String"
						resultType="All">
		select coupon_code, owner_id, user_id, comment_code, coupon_status 
		from coupon 
		where coupon_code = #{couponCode}					
	</select>

</mapper>